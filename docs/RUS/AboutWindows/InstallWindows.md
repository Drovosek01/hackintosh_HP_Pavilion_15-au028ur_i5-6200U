## Установка Windows

В MacOSX необходимо выделить раздел под Windows. Нужно отделить часть места, например в Дисковой утилите и отформатировать новый раздел в файловую систему MS-DOS или FAT. Я рекомендую отделять раздел 30+ ГБ. Позже во время установки Windows в окне с разделами нужно будет выбрать именно тот раздел, который вы отделили в MacOSX и установить Windows на него. Можно конечно в этом окне во время установки Windows удалить этот раздел и создать заново или отформатировать перед установкой, но, обычно, это не требуется.

Создаете загрузочную флешку с Windows удобным для вас способом. Я использовал оригинальный ISO образ Windows 10 с последними обновлениями и утилиту rufus для создания загрузочной флешки. После создания загрузочной флешки не вынимаете ее из USB порта, перезагружаетесь в загрузчик Clover и в нем уже выбираете появившийся пункт с установкой Windows. Если пункта с установкой Windows у вас не появилось, то есть несколько причин, почему так случилось:

- У меня как-то раз было, что rufus сделал загрузочную флешку с EFI разделом, который был в формате NTFS и, насколько я помню, Clover не смог прочитать информацию с такого раздела. Для этого нужно [скачать драйвер NTFS.efi](https://applelife.ru/threads/clover.42089/) и положить в папку со всеми драйверами для Clover.
- Возможно у вас отключено сканирование Legacy разделов, хотя я не уверен, что это как-то влияет. Параметр располагается в конфиге в `GUI > Scan > Legacy` или какой-нибудь другой параметр рядом с этим. Чтобы показать скрытые в Clover разделы, нужно в интерфейсе Clover нажать клавишу F3 (или Fn+F3).
- У вас плохо сделана загрузочная флешка.

После установки Windows и перезагрузки у вас, скорее всего, перестанет загружаться Clover, а станет сразу запускаться Windows. Есть несколько способов решения данной проблемы.

- Самый эффективный способ решения проблемы заключается в том, что в BIOS/UEFI нужно выбрать .efi файл кловера на ESP. Он располагается по следующему пути: `/EFI/CLOVER/CLOVERX64.efi`. Это самый лучший вариант, но не во всех биосах есть возможность выбора файла с которого можно загрузиться (На моем ноутбуке не было). Сохраняете настройки BIOS/UEFI и после перезагрузки у вас должен запускаться Clover.
- Возможно Windows при установке перезаписала главный загрузочный файл на ESP, который находится в `/EFI/BOOT`. Вы должны перейти в эту папку и посмотреть название файла, потом вместо него в эту папку поместить файл `/EFI/CLOVER/CLOVERX64.efi` и назвать так же. У меня файл в `/EFI/BOOT` назывался `BOOTX64.efi`.  Перезагружаетесь и у вас должен запускаться Clover.
- Вам нужно в ESP перейти в папку `/EFI/Microsoft/Boot` и файл bootmgfw.efi переименовать в bootmgfw-orig.efi и перезагрузить компьютер и у вас должен запускаться Clover. Данный способ не очень хороший, т.к. после обвновления Windows 10 может создать файл bootmgfw.efi и тогда у вас снова перестанет запускаться Clover.
- Самый костальный но так же рабочий способ и так же обновление Windows может сломать такой способ. На ESP файл `/EFI/Microsoft/Boot/bootmgfw.efi` (иногда он называется bootmgrfw.efi) переименовываете в любой другой, например mywin.efi. Потом файл `/EFI/CLOVER/CLOVERX64.efi` перемещаете в `/EFI/Microsoft/Boot` и называете bootmgfw.efi. Дальше действуете по [инструкции с форума 4pda](https://4pda.ru/forum/index.php?showtopic=84979&view=findpost&p=79185441).

Потом я рекомендую создать 3 раздел, который будет использоваться для обмена файлами между Windows и MacOSX. Дело в том, что без специальных программ Windows не может читать и записывать данные на раздел с файловой системой HFS+ или APFS. MacOSX может читать данные с раздела с файловой системой NTFS, но не может записывать на него данные.  Конечно есть сторонние программы, чтобы исправить эту проблему, но можно обойтись и без них.

И Windows и MacOSX могут записывать и считывать данные на файловую систему ExFat. Нужно в MacOSX в Дисковой утилите отделить раздел и форматировать его в файловую систему ExFat или в Windows в "Управление дисками", сжать какой-нибудь NTFS раздел, а потом отформатировать его в ExFat. Этот раздел ExFat и будет разделом для файлов и файлы, которые вы переместили/скопировали на разедл с файловой системой ExFat будет доступен и в Windows.

У меня на SSD есть 3 раздела: NTFS, APFS, ExFat. Раздел с файловой системой ExFat я сделал из под MacOSX и когда я из под MaOSX на него перемещаю большие файлы, например .mp4 файл размером ~5 ГБ. То при загрузке в Windows этот файл не виден даже если включить отображение системных файлов. Файл становится виден в Windows только после перезагрузки. Я не знаю с чем это связано, но, некоторые люди говорят, что если раздел ExFat был бы создан из под Windows, то такой проблемы бы не было.